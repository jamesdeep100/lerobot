# ============================================
# 批次实验配置文件模板
# 
# 使用方法：
#   1. 复制此文件到 experiments/batch_YYYYMMDD_HHMM/config.yaml
#   2. 修改下方实验列表
#   3. 运行: ./scripts/run_batch.sh experiments/batch_xxx/config.yaml
#
# ⚠️ 严禁直接修改此模板文件！
# ============================================

# 批次信息
batch:
  name: "batch_YYYYMMDD_HHMM"
  created: "2026-01-12 17:00:00"
  purpose: "描述这批实验的目的"

# 机器配置
machines:
  laptop:
    host: "localhost"
    gpu: "RTX 5090"
    enabled: true
  desktop:
    host: "james@100.67.100.43"  # Tailscale IP
    gpu: "RTX 3060 Ti"
    enabled: true

# 实验列表
# 每个实验必须指定：
#   - name: 实验名称（会自动加上批次时间戳前缀）
#   - policy: diffusion 或 act
#   - machine: laptop 或 desktop
#   - parent: 父实验ID（从 experiment_registry.md 查找）
#   - params: 训练参数

experiments:
  # ===== ACT 实验 =====
  - name: "act_50k_sota"
    policy: "act"
    machine: "desktop"
    parent: "act_005"  # 基于当前最优
    params:
      steps: 50000
      dim_model: 1024
      n_decoder_layers: 4
      chunk_size: 10
      n_action_steps: 10
      batch_size: 32
    eval:
      enabled: true
      n_episodes: 50

  # ===== Diffusion 实验 =====
  - name: "diff_200k"
    policy: "diffusion"
    machine: "laptop"
    parent: "exp_006"  # 基于当前最优
    params:
      steps: 200000
      horizon: 32       # 最优值
      n_action_steps: 8 # 最优值
      batch_size: 32
    eval:
      enabled: true
      n_episodes: 50

# 检查清单（启动前必须确认）
checklist:
  - "已查阅 experiment_registry.md 确认父实验和最佳参数"
  - "所有实验都有明确的 parent 指向"
  - "台式机 SSH/Tailscale 连接正常"
